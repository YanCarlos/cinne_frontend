(this.webpackJsonpcinne_frontend=this.webpackJsonpcinne_frontend||[]).push([[0],{176:function(e,t,a){e.exports=a(387)},183:function(e,t,a){},387:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(36),i=a.n(r),c=(a(181),a(182),a(183),a(61)),o=a(37),s=a(38),m=a(44);function u(e){var t=e.text,a=e.to,n=e.activeOnlyWhenExact,r=e.icon,i=Object(s.f)({path:a,exact:n});return l.a.createElement("li",{className:i?"active-link":""},r&&l.a.createElement(m.a,{icon:r,className:"icon color-white mr-10"}),l.a.createElement(c.b,{to:a},t))}var d=function(){return l.a.createElement("div",{className:"leftbar"},l.a.createElement("div",{className:"logo"},l.a.createElement("span",{className:"place"},"Place"),l.a.createElement("span",{className:"it"},"it")),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement(u,{to:"/reservas",text:"Reservas",icon:o.a,activeOnlyWhenExact:!0}),l.a.createElement(u,{to:"/",text:"Peliculas",icon:o.b,activeOnlyWhenExact:!0}))))},h=a(14),E=a(15),f=a(22),g=a(21),p=a(23),v=a(394),b=a(395),k=a(396),y=a(397),w=a(398),N=a(399),j=a(391),M=a(10),O=a(24),_=O.object().shape({name:O.string().required("El nombre es requerido."),description:O.string().required("La descripci\xf3n es requerida."),image_url:O.string().required("La url de la imagen es requerida").url("Esto debe ser una URL valida"),schedules_attributes:O.array().min(1,"Debes seleccionar por lo menos una fecha.").required("Las fechas son requeridas.")}),x=a(57),S=a.n(x),q="https://cinneapi.herokuapp.com/api/v1",B={Authorization:"Token token=IKwBGwZc4RKUYYDqNpaVi5q3AMLgSByi"},C=a(173),D=a.n(C);function L(e){return D()(e).format("DD/M/YYYY")}var P=function(){function e(){Object(h.a)(this,e)}return Object(E.a)(e,null,[{key:"all",value:function(e){return S.a.get(q+"/movies?date="+L(e),{headers:B})}},{key:"create",value:function(e){return console.log(e),S()({method:"post",url:q+"/movies",data:{movie:e},headers:B}).then((function(e){if(200!==e.status)return Promise.reject(e.response)})).catch((function(e){return Promise.reject(e.response)}))}}]),e}();var T=function(e){var t=e.onclick,a=e.disabled;return l.a.createElement(j.a,{color:"primary",onClick:t,disabled:a},l.a.createElement(m.a,{icon:o.d,className:"icon"}),"Crear nueva pel\xedcula")},F=a(402),R=a(392),A=a(393),Y=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return l.a.createElement(F.a,{isOpen:this.props.show,toggle:this.props.toggle,centered:this.props.centered,size:this.props.size},l.a.createElement(R.a,{toggle:this.props.toggle},this.props.title," "),l.a.createElement(A.a,null,this.props.children))}}]),t}(l.a.Component),z=a(54),V=a.n(z);function W(e){return l.a.createElement("div",null,Object.keys(e).map((function(t,a){return l.a.createElement("div",{key:a},e[t])})))}var U={name:"",description:"",image_url:"",schedules_attributes:[{date:new Date}]},I=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={showModal:!1,modalMessage:"",modalTitle:""},a}return Object(p.a)(t,e),Object(E.a)(t,[{key:"openModal",value:function(e,t){this.setState({modalMessage:e,showModal:!0,modalTitle:t})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(M.e,{initialValues:U,validationSchema:_,onSubmit:function(t,a){var n=a.setSubmitting,l=a.resetForm;P.create(t).then((function(){n(!1),e.openModal("La pelicula se guard\xf3 correctamente!","Pelicula guardada"),l(U),e.props.onSuccess()}),(function(t){n(!1),e.openModal(W(t.data.message),"Error")}))}},(function(e){var t=e.values,a=e.errors,n=e.isSubmitting,r=e.touched,i=e.setFieldValue;e.setFieldTouched;return l.a.createElement(M.d,{className:"py-4"},l.a.createElement(v.a,null,l.a.createElement(b.a,null,l.a.createElement(k.a,null,l.a.createElement(y.a,{for:"name",className:"font-weight-bold"},"Nombre: *"),l.a.createElement(w.a,{type:"text",name:"name",id:"name",tag:M.b,invalid:Boolean(r.name&&a.name),"aria-required":!0}),l.a.createElement(M.a,{name:"name",component:N.a})))),l.a.createElement(v.a,null,l.a.createElement(b.a,null,l.a.createElement(k.a,null,l.a.createElement(y.a,{for:"description",className:"font-weight-bold"},"Descripci\xf3n: *"),l.a.createElement(w.a,{type:"textarea",name:"description",id:"description",tag:M.b,invalid:Boolean(r.description&&a.description),"aria-required":!0,component:"textarea"}),l.a.createElement(M.a,{name:"description",component:N.a})))),l.a.createElement(v.a,null,l.a.createElement(b.a,null,l.a.createElement(k.a,null,l.a.createElement(y.a,{for:"image_url",className:"font-weight-bold"},"Url de la imagen: "),l.a.createElement(w.a,{type:"text",name:"image_url",id:"image_url",tag:M.b,invalid:Boolean(r.image_url&&a.image_url),"aria-required":!0}),l.a.createElement(M.a,{name:"image_url",component:N.a})))),l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"12"},Boolean(r.schedules_attributes&&a.schedules_attributes)&&l.a.createElement("div",{className:"invalid-feedback d-block"},a.schedules_attributes)),l.a.createElement(b.a,null,l.a.createElement(k.a,null,l.a.createElement(y.a,{for:"schedules_attributes",className:"font-weight-bold"},"Fechas: "),l.a.createElement(M.c,{name:"schedules_attributes",render:function(e){return l.a.createElement("div",{className:"dates-selector"},t.schedules_attributes.map((function(n,c){return l.a.createElement("div",{key:c,className:"date d-flex justify-content-start align-items-center mb-10"},l.a.createElement("div",null,l.a.createElement(V.a,{selected:t.schedules_attributes[c].date,dateFormat:"MMMM d, yyyy",className:"form-control",name:"schedules_attributes[".concat(c,"].date"),onChange:function(e){return i("schedules_attributes[".concat(c,"].date"),e)},invalid:Boolean(r.schedules_attributes&&a.schedules_attributes)})),l.a.createElement(j.a,{className:"round-button danger",onClick:function(){return e.remove(c)}},l.a.createElement(m.a,{icon:o.c,className:"icon"})),l.a.createElement(j.a,{className:"round-button success",onClick:function(){return e.push({date:new Date})}},l.a.createElement(m.a,{icon:o.d,className:"icon"})))})))}})))),l.a.createElement("div",{className:"d-flex justify-content-end"},l.a.createElement(T,{disabled:n})))})),this.state.showModal&&l.a.createElement(Y,{show:this.state.showModal,toggle:function(){return e.setState({showModal:!1})},title:this.state.modalTitle,centered:!0},l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"12"},this.state.modalMessage)),l.a.createElement("br",null),l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"12",className:"d-flex justify-content-end"},l.a.createElement(j.a,{color:"primary",onClick:function(){return e.setState({showModal:!1})}},"Aceptar")))))}}]),t}(l.a.Component),J=function(){function e(){Object(h.a)(this,e)}return Object(E.a)(e,null,[{key:"all",value:function(e){return S.a.get(q+"/schedules/bookings?date="+L(e),{headers:B})}},{key:"create",value:function(e,t){return S()({method:"post",url:q+"/schedules/"+t+"/bookings",data:{booking:e},headers:B}).then((function(e){if(200!==e.status)return Promise.reject(e.response)})).catch((function(e){return Promise.reject(e.response)}))}}]),e}(),K=a(400),G=a(401),Z=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={bookings:[],loading:!0,startDate:new Date},a}return Object(p.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.fetchBookings()}},{key:"fetchBookings",value:function(e){var t=this;this.setState({loading:!0,bookings:[]}),J.all(e).then((function(e){t.setState({bookings:e.data,loading:!1})})).catch((function(e){console.log("error: ",e)}))}},{key:"renderLoader",value:function(){if(this.state.loading)return l.a.createElement("div",{className:"loader"})}},{key:"render",value:function(){var e=this;return l.a.createElement(K.a,{fluid:!0,className:"bookings"},l.a.createElement(v.a,null,l.a.createElement(b.a,{sm:"6",xs:"12"},l.a.createElement("h2",null,"Reservas"))),l.a.createElement("div",{className:"list"},l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"4"},"Seleccionar Fecha",l.a.createElement(V.a,{showPopperArrow:!1,selected:this.state.startDate,onChange:function(t){e.fetchBookings(t),e.setState({startDate:t})}}))),l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"12",className:"d-flex justify-content-center mb-10"},this.renderLoader())),l.a.createElement(v.a,null,this.state.bookings.length?l.a.createElement(G.a,{responsive:!0,className:"bookings-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Pelicula"),l.a.createElement("th",null,"Comprador"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Cedula"),l.a.createElement("th",null,"Celular"))),l.a.createElement("tbody",null,this.state.bookings.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,e.movie_name),l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.email),l.a.createElement("td",null,e.identification),l.a.createElement("td",null,e.phone))})))):l.a.createElement(b.a,{lg:"12",className:"d-flex justify-content-center"},l.a.createElement("div",null,"No hay Reservas para listar")))))}}]),t}(l.a.Component),$=O.object().shape({name:O.string().required("El nombre es requerido."),identification:O.string().required("La cedula es requerida."),phone:O.string().required("El telefono es requerido."),email:O.string().required("El email es requerido.").email("Debe ser un email valido.")}),H={name:"",identification:"",phone:"",email:""},Q=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={showModal:!1,modalMessage:"",modalTitle:""},a}return Object(p.a)(t,e),Object(E.a)(t,[{key:"openModal",value:function(e,t){this.setState({modalMessage:e,showModal:!0,modalTitle:t})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(M.e,{initialValues:H,validationSchema:$,onSubmit:function(t,a){var n=a.setSubmitting,l=a.resetForm;J.create(t,e.props.schedule_id).then((function(){n(!1),e.openModal("La reserva fue generada correctamente","Reserva realizada"),l(H)}),(function(t){n(!1),e.openModal(W(t.data.message),"Error")}))}},(function(e){e.values;var t=e.errors,a=e.isSubmitting,n=e.touched;e.setFieldValue,e.setFieldTouched;return l.a.createElement(M.d,{className:"py-4"},l.a.createElement(v.a,null,l.a.createElement(b.a,null,l.a.createElement(k.a,null,l.a.createElement(y.a,{for:"name",className:"font-weight-bold"},"Nombre"),l.a.createElement(w.a,{type:"text",name:"name",id:"name",tag:M.b,invalid:Boolean(n.name&&t.name),"aria-required":!0}),l.a.createElement(M.a,{name:"name",component:N.a}))),l.a.createElement(b.a,null,l.a.createElement(k.a,null,l.a.createElement(y.a,{for:"phone",className:"font-weight-bold"},"Celular"),l.a.createElement(w.a,{type:"text",name:"phone",id:"phone",tag:M.b,invalid:Boolean(n.phone&&t.phone),"aria-required":!0}),l.a.createElement(M.a,{name:"phone",component:N.a})))),l.a.createElement(v.a,null,l.a.createElement(b.a,null,l.a.createElement(k.a,null,l.a.createElement(y.a,{for:"identification",className:"font-weight-bold"},"Cedula "),l.a.createElement(w.a,{type:"text",name:"identification",id:"identification",tag:M.b,invalid:Boolean(n.identification&&t.identification),"aria-required":!0}),l.a.createElement(M.a,{name:"identification",component:N.a}))),l.a.createElement(b.a,null,l.a.createElement(k.a,null,l.a.createElement(y.a,{for:"email",className:"font-weight-bold"},"Correo electronico "),l.a.createElement(w.a,{type:"text",name:"email",id:"email",tag:M.b,invalid:Boolean(n.email&&t.email),"aria-required":!0}),l.a.createElement(M.a,{name:"email",component:N.a})))),l.a.createElement("div",{className:"d-flex justify-content-end  mt-10"},l.a.createElement(j.a,{color:"primary",disabled:a},"Reservar ahora")))})),this.state.showModal&&l.a.createElement(Y,{show:this.state.showModal,toggle:function(){return e.setState({showModal:!1})},title:this.state.modalTitle,centered:!0},l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"12"},this.state.modalMessage)),l.a.createElement("br",null),l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"12",className:"d-flex justify-content-end"},l.a.createElement(j.a,{color:"primary",onClick:function(){return e.setState({showModal:!1})}},"Aceptar")))))}}]),t}(l.a.Component),X=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={loading:!0,newBooking:!1},a}return Object(p.a)(t,e),Object(E.a)(t,[{key:"imageLoaded",value:function(){this.setState({loading:!1})}},{key:"renderLoader",value:function(){if(this.state.loading)return l.a.createElement("div",{className:"loader"})}},{key:"newBooking",value:function(){this.setState({newBooking:!0})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"movie"},this.renderLoader(),l.a.createElement("img",{src:this.props.image_url,alt:this.props.name,onLoad:this.imageLoaded.bind(this)}),l.a.createElement("div",{className:"booking"},l.a.createElement(j.a,{color:"primary",disabled:!this.props.can_booking,onClick:function(){return e.newBooking()}},"Reservar")),this.state.newBooking&&l.a.createElement(Y,{show:this.state.newBooking,toggle:function(){return e.setState({newBooking:!1})},title:"Reservar",centered:!0,closeButtonText:"Close",size:"lg"},l.a.createElement(Q,{schedule_id:this.props.schedule_id})))}}]),t}(l.a.Component),ee=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).state={movies:[],loading:!0,startDate:new Date,newMovie:!1},a}return Object(p.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.fetchMovies()}},{key:"fetchMovies",value:function(e){var t=this;this.setState({loading:!0,movies:[]}),P.all(e).then((function(e){t.setState({movies:e.data,loading:!1})})).catch((function(e){console.log("error: ",e)}))}},{key:"renderLoader",value:function(){if(this.state.loading)return l.a.createElement("div",{className:"loader"})}},{key:"newMovie",value:function(){this.setState({newMovie:!0})}},{key:"render",value:function(){var e=this;return l.a.createElement(K.a,{fluid:!0,className:"movies"},l.a.createElement(v.a,{className:"title-container"},l.a.createElement(b.a,{sm:"6",xs:"12",className:"column"},l.a.createElement("h2",null,"Peliculas")),l.a.createElement(b.a,{sm:"6",xs:"12",className:"d-flex justify-content-end column"},l.a.createElement(T,{onclick:function(){return e.newMovie()}}))),l.a.createElement("div",{className:"list"},l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"4"},"Seleccionar Fecha",l.a.createElement(V.a,{showPopperArrow:!1,selected:this.state.startDate,onChange:function(t){e.fetchMovies(t),e.setState({startDate:t})}}))),l.a.createElement(v.a,null,l.a.createElement(b.a,{lg:"12",className:"d-flex justify-content-center mb-10"},this.renderLoader())),l.a.createElement(v.a,null,this.state.movies.length?this.state.movies.map((function(e){return l.a.createElement(b.a,{lg:"3",sm:"6",className:"column",key:e.id},l.a.createElement(X,{name:e.name,image_url:e.image_url,can_booking:e.can_booking,schedule_id:e.schedule_id}))})):l.a.createElement(b.a,{lg:"12",className:"d-flex justify-content-center"},l.a.createElement("div",null,"No hay Peliculas para listar")))),this.state.newMovie&&l.a.createElement(Y,{show:this.state.newMovie,toggle:function(){return e.setState({newMovie:!1})},title:"Crear Pelicula",centered:!0,closeButtonText:"Close"},l.a.createElement(I,{onSuccess:function(){return e.fetchMovies(new Date)}})))}}]),t}(l.a.Component);var te=function(){return l.a.createElement("div",{className:"yield"},l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/reservas"},l.a.createElement(Z,null)),l.a.createElement(s.a,{path:"/"},l.a.createElement(ee,null))))};var ae=function(){return l.a.createElement("div",{className:"app"},l.a.createElement(c.a,null,l.a.createElement(d,null),l.a.createElement(te,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(386),i.a.render(l.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[176,1,2]]]);
//# sourceMappingURL=main.06f91e02.chunk.js.map